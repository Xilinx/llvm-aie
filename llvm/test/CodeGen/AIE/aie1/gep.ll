; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
;
; This file is licensed under the Apache License v2.0 with LLVM Exceptions.
; See https://llvm.org/LICENSE.txt for license information.
; SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
;
; (c) Copyright 2023-2024 Advanced Micro Devices, Inc. or its affiliates
; RUN: llc -mtriple=aie < %s | FileCheck %s

; CHECK: // %bb.0:
; CHECK:         mov.u20 r12, #2
; CHECK:         lshl    r12, r6, r12
; CHECK:         mov.u20 r13, #buf0
; CHECK:         add     r12, r13, r12
; CHECK:         mov     p0, r12
; CHECK:         lda     r0, [p0]

@buf0 = external global [64 x i32]
@buf1 = external global [64 x i32]
@buf2 = external global [64 x i32]

define i32 @gep(i32 %r3) {
  %r6 = getelementptr i32, i32* getelementptr inbounds ([64 x i32], [64 x i32] * @buf0, i64 0, i64 0), i32 %r3
  %r7 = load i32, i32* %r6, align 4
  ret i32 %r7
}
